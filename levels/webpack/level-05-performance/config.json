{
  "id": "webpack-performance",
  "title": "âš¡ Webpack æ€§èƒ½ä¼˜åŒ– - è®©æ„å»ºé£èµ·æ¥",
  "description": "æ„å»ºé€Ÿåº¦æ…¢ï¼ŸåŒ…ä½“ç§¯å¤§ï¼Ÿç”¨æˆ·åŠ è½½æ…¢ï¼Ÿè¿™ä¸€å…³å°†æ•™ä½ Webpackçš„ç»ˆææ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼ä»æŒä¹…åŒ–ç¼“å­˜åˆ°Tree Shakingï¼Œä»æ¨¡å—åˆ«ååˆ°å¤–éƒ¨ä¾èµ–ï¼Œè®©ä½ çš„æ„å»ºé€Ÿåº¦æå‡10å€ï¼ŒåŒ…ä½“ç§¯å‡å°‘50%ã€‚",
  "difficulty": "ä¸“å®¶",
  "estimatedTime": "35åˆ†é’Ÿ",
  "category": "webpack",
  "scenario": "ä½ çš„é¡¹ç›®æ„å»ºæ—¶é—´è¶Šæ¥è¶Šé•¿ï¼Œæ¯æ¬¡ä¿®æ”¹ä»£ç éƒ½è¦ç­‰å¾ˆä¹…ã€‚åŒæ—¶æ‰“åŒ…åçš„æ–‡ä»¶å¾ˆå¤§ï¼Œç”¨æˆ·åŠ è½½æ…¢ã€‚ä½ éœ€è¦ä½¿ç”¨å„ç§æ€§èƒ½ä¼˜åŒ–æŠ€å·§æ¥è§£å†³è¿™äº›é—®é¢˜ã€‚",
  "learningObjectives": [
    "ğŸš€ å¯ç”¨æŒä¹…åŒ–ç¼“å­˜ï¼Œå¤§å¹…æå‡é‡å¤æ„å»ºé€Ÿåº¦",
    "ğŸ¯ é…ç½®æ¨¡å—åˆ«åï¼Œä¼˜åŒ–æ¨¡å—è§£ææ€§èƒ½",
    "ğŸ“¦ ä½¿ç”¨externalsæ’é™¤å¤§å‹åº“ï¼Œå‡å°åŒ…ä½“ç§¯",
    "ğŸŒ³ å¯ç”¨Tree Shakingï¼Œè‡ªåŠ¨åˆ é™¤æœªä½¿ç”¨ä»£ç "
  ],
  "tasks": [
    {
      "id": "setup-persistent-cache",
      "title": "ğŸ’¾ ä»»åŠ¡1ï¼šå¯ç”¨æŒä¹…åŒ–ç¼“å­˜",
      "description": "é…ç½®Webpack 5çš„æŒä¹…åŒ–ç¼“å­˜åŠŸèƒ½ï¼Œè®©ç¬¬äºŒæ¬¡æ„å»ºé€Ÿåº¦æå‡10å€ä»¥ä¸Šã€‚",
      "specificSteps": [
        {
          "step": 1,
          "action": "åœ¨webpack.config.jsä¸­æ·»åŠ cacheé…ç½®",
          "code": "cache: {\n  type: 'filesystem',\n  buildDependencies: {\n    config: [__filename]\n  }\n},",
          "explanation": "å¯ç”¨æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ï¼Œé…ç½®æ–‡ä»¶å˜åŒ–æ—¶è‡ªåŠ¨å¤±æ•ˆç¼“å­˜"
        }
      ],
      "cacheOptions": {
        "type: 'filesystem'": "ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨ç¼“å­˜ï¼ˆæ¯”å†…å­˜ç¼“å­˜æ›´æŒä¹…ï¼‰",
        "buildDependencies": "æŒ‡å®šæ„å»ºä¾èµ–ï¼Œä¾èµ–å˜åŒ–æ—¶ç¼“å­˜å¤±æ•ˆ",
        "config: [__filename]": "é…ç½®æ–‡ä»¶å˜åŒ–æ—¶è‡ªåŠ¨æ¸…é™¤ç¼“å­˜"
      },
      "performanceGain": "é¦–æ¬¡æ„å»ºåï¼Œåç»­æ„å»ºé€Ÿåº¦å¯æå‡80-90%",
      "expectedResult": "ç¬¬äºŒæ¬¡æ„å»ºæ—¶ä¼šçœ‹åˆ°æ˜æ˜¾çš„é€Ÿåº¦æå‡",
      "validation": {
        "type": "file-content",
        "file": "webpack.config.js",
        "contains": "cache:"
      }
    },
    {
      "id": "setup-resolve-optimization",
      "title": "ğŸ¯ ä»»åŠ¡2ï¼šä¼˜åŒ–æ¨¡å—è§£æ",
      "description": "é…ç½®æ¨¡å—åˆ«åå’Œè§£æä¼˜åŒ–ï¼Œå‡å°‘æ–‡ä»¶æŸ¥æ‰¾æ—¶é—´ã€‚",
      "specificSteps": [
        {
          "step": 1,
          "action": "æ·»åŠ resolveé…ç½®",
          "code": "resolve: {\n  alias: {\n    '@': path.resolve(__dirname, 'src'),\n    '@components': path.resolve(__dirname, 'src/components'),\n    '@utils': path.resolve(__dirname, 'src/utils')\n  },\n  extensions: ['.js', '.jsx', '.ts', '.tsx'],\n  modules: ['node_modules']\n},",
          "explanation": "è®¾ç½®è·¯å¾„åˆ«åå’Œä¼˜åŒ–æ¨¡å—æŸ¥æ‰¾"
        }
      ],
      "resolveOptimizations": {
        "alias": "åˆ›å»ºè·¯å¾„åˆ«åï¼Œé¿å…å¤æ‚çš„ç›¸å¯¹è·¯å¾„",
        "extensions": "æŒ‡å®šæ–‡ä»¶æ‰©å±•åï¼Œå‡å°‘æŸ¥æ‰¾æ¬¡æ•°",
        "modules": "æŒ‡å®šæ¨¡å—æŸ¥æ‰¾ç›®å½•ï¼Œé¿å…å‘ä¸ŠæŸ¥æ‰¾"
      },
      "expectedResult": "å¯ä»¥ä½¿ç”¨@/components/Buttonä»£æ›¿../../components/Button",
      "validation": {
        "type": "file-content",
        "file": "webpack.config.js",
        "contains": "resolve:"
      }
    },
    {
      "id": "setup-externals",
      "title": "ğŸ“¦ ä»»åŠ¡3ï¼šé…ç½®å¤–éƒ¨ä¾èµ–",
      "description": "å°†å¤§å‹åº“ï¼ˆå¦‚Reactã€Lodashï¼‰é…ç½®ä¸ºå¤–éƒ¨ä¾èµ–ï¼Œé€šè¿‡CDNåŠ è½½ï¼Œå‡å°åŒ…ä½“ç§¯ã€‚",
      "specificSteps": [
        {
          "step": 1,
          "action": "æ·»åŠ externalsé…ç½®",
          "code": "externals: {\n  'react': 'React',\n  'react-dom': 'ReactDOM',\n  'lodash': '_'\n},",
          "explanation": "è¿™äº›åº“å°†é€šè¿‡å…¨å±€å˜é‡è®¿é—®ï¼Œä¸ä¼šè¢«æ‰“åŒ…"
        }
      ],
      "externalsStrategy": {
        "CDNåŠ è½½": "å¤§å‹åº“é€šè¿‡CDNåŠ è½½ï¼Œåˆ©ç”¨æµè§ˆå™¨ç¼“å­˜",
        "å‡å°åŒ…ä½“ç§¯": "ä¸»bundleä¸åŒ…å«è¿™äº›åº“ï¼Œä½“ç§¯å¤§å¹…å‡å°",
        "å¹¶è¡ŒåŠ è½½": "ä¸»bundleå’Œå¤–éƒ¨åº“å¯ä»¥å¹¶è¡Œä¸‹è½½"
      },
      "expectedResult": "æ‰“åŒ…åçš„bundleä¸åŒ…å«Reactç­‰å¤§å‹åº“",
      "validation": {
        "type": "file-content",
        "file": "webpack.config.js",
        "contains": "externals:"
      }
    },
    {
      "id": "enable-tree-shaking",
      "title": "ğŸŒ³ ä»»åŠ¡4ï¼šå¯ç”¨Tree Shaking",
      "description": "é…ç½®Tree Shakingæ¥è‡ªåŠ¨åˆ é™¤æœªä½¿ç”¨çš„ä»£ç ï¼Œè¿›ä¸€æ­¥å‡å°åŒ…ä½“ç§¯ã€‚",
      "specificSteps": [
        {
          "step": 1,
          "action": "åœ¨package.jsonä¸­è®¾ç½®sideEffects",
          "code": "\"sideEffects\": false,",
          "explanation": "å‘Šè¯‰Webpackä»£ç æ²¡æœ‰å‰¯ä½œç”¨ï¼Œå¯ä»¥å®‰å…¨åˆ é™¤æœªä½¿ç”¨éƒ¨åˆ†"
        },
        {
          "step": 2,
          "action": "ç¡®ä¿ä½¿ç”¨ES6æ¨¡å—è¯­æ³•",
          "code": "// ä½¿ç”¨ES6 import/export\nimport { debounce } from 'lodash-es';\nexport { myFunction };",
          "explanation": "Tree Shakingåªå¯¹ES6æ¨¡å—æœ‰æ•ˆ"
        }
      ],
      "treeShakingBenefits": {
        "è‡ªåŠ¨ä¼˜åŒ–": "è‡ªåŠ¨åˆ é™¤æœªä½¿ç”¨çš„å‡½æ•°ã€å˜é‡ã€ç±»",
        "åŒ…ä½“ç§¯å‡å°": "å¯ä»¥å‡å°20-50%çš„åŒ…ä½“ç§¯",
        "é›¶é…ç½®": "ç”Ÿäº§æ¨¡å¼ä¸‹è‡ªåŠ¨å¯ç”¨"
      },
      "expectedResult": "æœªä½¿ç”¨çš„ä»£ç ä¸ä¼šå‡ºç°åœ¨æœ€ç»ˆbundleä¸­",
      "validation": {
        "type": "file-content",
        "file": "package.json",
        "contains": "sideEffects"
      }
    }
  ],
  "progressiveHints": [
    {
      "attempt": 1,
      "hint": "ğŸ’¾ **ç¬¬ä¸€ä¸ªæç¤º**ï¼šæ€§èƒ½ä¼˜åŒ–ä»ç¼“å­˜å¼€å§‹ï¼š\n\n```javascript\ncache: {\n  type: 'filesystem'\n}\n```\n\nè¿™ä¼šå¯ç”¨æŒä¹…åŒ–ç¼“å­˜ï¼Œå¤§å¹…æå‡é‡å¤æ„å»ºé€Ÿåº¦ã€‚"
    },
    {
      "attempt": 2,
      "hint": "ğŸ¯ **ç¬¬äºŒä¸ªæç¤º**ï¼šæ·»åŠ æ¨¡å—è§£æä¼˜åŒ–ï¼š\n\n```javascript\nresolve: {\n  alias: {\n    '@': path.resolve(__dirname, 'src')\n  },\n  extensions: ['.js', '.jsx']\n}\n```\n\nè¿™ä¼šåŠ å¿«æ¨¡å—æŸ¥æ‰¾é€Ÿåº¦ã€‚"
    },
    {
      "attempt": 3,
      "hint": "ğŸš€ **å®Œæ•´æ€§èƒ½ä¼˜åŒ–é…ç½®**ï¼š\n\n```javascript\nconst path = require('path');\n\nmodule.exports = {\n  mode: 'production',\n  \n  // æŒä¹…åŒ–ç¼“å­˜\n  cache: {\n    type: 'filesystem',\n    buildDependencies: {\n      config: [__filename]\n    }\n  },\n  \n  // æ¨¡å—è§£æä¼˜åŒ–\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, 'src')\n    },\n    extensions: ['.js', '.jsx'],\n    modules: ['node_modules']\n  },\n  \n  // å¤–éƒ¨ä¾èµ–\n  externals: {\n    'react': 'React',\n    'lodash': '_'\n  },\n  \n  // ä¼˜åŒ–é…ç½®\n  optimization: {\n    usedExports: true, // å¯ç”¨Tree Shaking\n    sideEffects: false\n  }\n};\n```"
    }
  ],
  "solution": {
    "webpack.config.js": "const path = require('path');\n\nmodule.exports = {\n  entry: './src/index.js',\n  output: {\n    path: path.resolve(__dirname, 'dist'),\n    filename: '[name].[contenthash].js',\n    clean: true\n  },\n  mode: 'production',\n  \n  // æŒä¹…åŒ–ç¼“å­˜ - å¤§å¹…æå‡é‡å¤æ„å»ºé€Ÿåº¦\n  cache: {\n    type: 'filesystem', // ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿç¼“å­˜\n    buildDependencies: {\n      config: [__filename] // é…ç½®æ–‡ä»¶å˜åŒ–æ—¶æ¸…é™¤ç¼“å­˜\n    }\n  },\n  \n  // æ¨¡å—è§£æä¼˜åŒ–\n  resolve: {\n    // è·¯å¾„åˆ«å - ç®€åŒ–å¯¼å…¥è·¯å¾„\n    alias: {\n      '@': path.resolve(__dirname, 'src'),\n      '@components': path.resolve(__dirname, 'src/components'),\n      '@utils': path.resolve(__dirname, 'src/utils')\n    },\n    // æ–‡ä»¶æ‰©å±•å - å‡å°‘æŸ¥æ‰¾æ¬¡æ•°\n    extensions: ['.js', '.jsx', '.ts', '.tsx'],\n    // æ¨¡å—æŸ¥æ‰¾ç›®å½•\n    modules: ['node_modules']\n  },\n  \n  // å¤–éƒ¨ä¾èµ– - é€šè¿‡CDNåŠ è½½ï¼Œå‡å°åŒ…ä½“ç§¯\n  externals: {\n    'react': 'React',\n    'react-dom': 'ReactDOM',\n    'lodash': '_'\n  },\n  \n  // ä¼˜åŒ–é…ç½®\n  optimization: {\n    usedExports: true, // æ ‡è®°æœªä½¿ç”¨çš„å¯¼å‡º\n    sideEffects: false, // å¯ç”¨Tree Shaking\n    splitChunks: {\n      chunks: 'all'\n    }\n  },\n  \n  // æ€§èƒ½æç¤º\n  performance: {\n    hints: 'warning',\n    maxEntrypointSize: 250000,\n    maxAssetSize: 250000\n  }\n};",
    "package.json": "{\n  \"name\": \"webpack-performance-optimization\",\n  \"version\": \"1.0.0\",\n  \"sideEffects\": false,\n  \"scripts\": {\n    \"build\": \"webpack --mode production\",\n    \"dev\": \"webpack --mode development\"\n  },\n  \"devDependencies\": {\n    \"webpack\": \"^5.88.0\",\n    \"webpack-cli\": \"^5.1.0\"\n  }\n}"
  },
  "validation": {
    "required": [
      {
        "key": "cache:",
        "message": "è¯·é…ç½® cache å¯ç”¨æŒä¹…åŒ–ç¼“å­˜",
        "hints": ["cache: { type: 'filesystem' } å¯ä»¥å¯ç”¨æ–‡ä»¶ç³»ç»Ÿç¼“å­˜"]
      },
      {
        "key": "resolve:",
        "message": "è¯·æ·»åŠ  resolve é…ç½®ä¼˜åŒ–æ¨¡å—è§£æ",
        "hints": ["resolve.alias å¯ä»¥åˆ›å»ºæ¨¡å—åˆ«åï¼ŒåŠ å¿«è§£æé€Ÿåº¦"]
      },
      {
        "key": "externals:",
        "message": "è¯·é…ç½® externals æ’é™¤å¤–éƒ¨ä¾èµ–",
        "hints": ["externals å¯ä»¥é˜²æ­¢æŸäº›åŒ…è¢«æ‰“åŒ…ï¼Œå‡å° bundle å¤§å°"]
      },
      {
        "key": "sideEffects: false",
        "message": "è¯·è®¾ç½® sideEffects å¯ç”¨ Tree Shaking",
        "hints": ["sideEffects: false å‘Šè¯‰ webpack ä»£ç æ²¡æœ‰å‰¯ä½œç”¨ï¼Œå¯ä»¥å®‰å…¨åœ°è¿›è¡Œ Tree Shaking"]
      }
    ]
  }
}